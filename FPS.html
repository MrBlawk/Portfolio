<!DOCTYPE html>
<html>

<head>
    <title>FPS Trial Game</title>
    <meta charset=utf-8 />
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
  
    
</head>





<body>
<script type="module">
    
import * as THREE from 'https://cdn.skypack.dev/three';
import { OrbitControls } from 'https://cdn.skypack.dev/three/examples/jsm/controls/OrbitControls.js';
import { Octree } from 'https://cdn.skypack.dev/three/examples/jsm/math/Octree.js';
import { Capsule } from 'https://cdn.skypack.dev/three/examples/jsm/math/Capsule.js';


//resizer
function resizeRendererToDisplaySize(renderer) {
const canvas = renderer.domElement;
const width = canvas.clientWidth;
const height = canvas.clientHeight;
const needResize = canvas.width !== width || canvas.height !== height;
if (needResize) {
    renderer.setSize(width, height, false);
}
return needResize;
}

function Main()
{
    let scene, camera;

    const canvas = document.querySelector('#c');
    let renderer = new THREE.WebGLRenderer(({canvas, antialias: true}));

    //const Octree = new Octree();
    //const clock = new THREE.Clock();

    scene = new THREE.Scene();
    scene.background = new THREE.Color( 0x88ccff );

    camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 5000 );
	camera.position.set(75,20,0);
    //camera.rotation.order = 'YXZ';

    let controls = new OrbitControls(camera, renderer.domElement);
    controls.target.set(0,0,0);


    {
        const color = 0x6688cc;
        const intensity = 1;
        const spotIntensity = 2;
        const ambientlight = new THREE.AmbientLight( color, intensity );
        const light = new THREE.SpotLight(color, spotIntensity);
        light.position.set(50,50,1)
        scene.add(  light, ambientlight );
    }

    const plane = new THREE.Mesh(
        new THREE.PlaneGeometry(100,100,1,1),
        new THREE.MeshStandardMaterial({
            color: 0x484848
        }));
        plane.castShadow = false;
        plane.receiveShadow = true;
        plane.rotation.x = -Math.PI / 2;
        scene.add(plane);



    function MakeWallInstance(location){
        const wall = new THREE.Mesh(
        new THREE.BoxGeometry(10,5,1,1),
        new THREE.MeshStandardMaterial({
            color: 0xFFFFFF
        }));
        wall.castShadow = true;
        wall.receiveShadow = true;
        wall.position.set(location,2.5, 0)
        scene.add(wall);
    }

    for(let i = 0; i < 5 ; i++)
    {
        let spawnPos = i * 50;
        MakeWallInstance(spawnPos);
    }

    function render(time) {
        time *= 0.001;
    
        const canvas = renderer.domElement;

    
        if (resizeRendererToDisplaySize(renderer)) {
        const canvas = renderer.domElement;
        camera.aspect = canvas.clientWidth / canvas.clientHeight;
        camera.updateProjectionMatrix();
    }

        renderer.render(scene, camera);

        requestAnimationFrame(render);
    }


    requestAnimationFrame(render);


    animate();

    function animate()
    {
    renderer.render(scene, camera);
    requestAnimationFrame(animate);
    }

    requestAnimationFrame(render);

}

Main();

</script>

<canvas id="c"></canvas>


</body>
</html>

<style>
    html, body{
        margin: 0;
        height: 100%;
    }
    #c {
        width: 100%;
        height: 100%;
        display: block;
    }
</style>
